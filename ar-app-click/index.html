<!doctype HTML>
<html>
    <head>
        <script src="https://aframe.io/releases/1.3.0/aframe.min.js"></script>
        <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar.js"></script>
        <script src="https://unpkg.com/aframe-event-set-component@^4.0.0/dist/aframe-event-set-component.min.js"></script>

        <script src="components.js"></script>
        <script src="/cursor.js" defer></script>

            
        <script>
            AFRAME.registerComponent('play-sound', {
            init: function () {
                var el = this.el
            
            el.addEventListener('click', function () {

                var ding = new Audio("ding.mp3");
                ding.play();
                console.log(el.getAttribute('visible')); 

                if(el.getAttribute('visible') === 'true'){
                  console.log("wowzers")
                }
            })
        }
    });
          </script>
    </head>
        <body style="margin: 0px; overflow: hidden;">
            <a-scene embedded arjs id="scene">
                <a-assets>
                    <a-asset-item id = "red-maple" src = "red_maple_acer_rubrum.jpg"></a-asset-item>
                    <a-asset-item id = "drs" src = "drseeram.jpg"></a-asset-item>
                    <a-asset-item id = "gcs" src = "GCGs.jpg"></a-asset-item>
                </a-assets>
                <a-marker markerhandler emitevents="true" cursor="rayOrigin: mouse" raycaster="objects: a-box" preset="hiro" id = "hiro-marker">
                    <a-box position="0 0.5 0" visible="false" color-randomizer play-sound id="box"></a-box>
                    <a-image id="red-maple" geometry="primitive: plane" src="red_maple_acer_rubrum.jpg" rotation="-90 0 0" width="2" height="1.5" position='0 0 0'></a-image>
                </a-marker>
                <a-entity camera ></a-entity>
            </a-scene>
            <script>
                document.querySelector('a-marker').addEventListener('markerFound', function () {
                    var box = document.querySelector('#box');
                
                    // Set the box to be visible when marker is found
                    box.setAttribute('visible', 'true');
                    console.log(box.getAttribute('visible'))
                });
            </script>
            <script>
                document.querySelector('a-marker').addEventListener('markerLost', function () {
                    var box = document.querySelector('#box');
                
                    // Set the box to be visible when marker is found
                    box.setAttribute('visible', 'false');
                    console.log(box.getAttribute('visible'))
                });
            </script>
        </body>
</html>